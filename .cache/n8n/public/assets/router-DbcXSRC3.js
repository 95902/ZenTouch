const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MainSidebar-CR7IKmug.js","assets/_plugin-vue_export-helper-BwBpWJRZ.js","assets/src-DEMmv7aL.js","assets/preload-helper-CR0ecmWK.js","assets/icon-bktrs2EQ.js","assets/vue.runtime.esm-bundler-DDuXT-9r.js","assets/chunk-6z4oVpB-.js","assets/truncate-Zm7rqMgr.js","assets/_MapCache-CaP4mhI9.js","assets/sanitize-html-BuXr7o4T.js","assets/empty-BuGRxzl4.js","assets/path-browserify-DsmB_HMK.js","assets/en-BYTsM8fR.js","assets/src-B3UiHJ-Q.css","assets/nodeCreator.store-dfEe2Vlw.js","assets/constants-yBDcqULv.js","assets/merge-BONzxfgw.js","assets/useTelemetry-DMMCGp2b.js","assets/dateformat-D7TIhVd4.js","assets/useDebounce-BDOVCaxX.js","assets/useExternalHooks-zp0_PYje.js","assets/templates.store-CPIqYFhQ.js","assets/cloudPlan.store-DVjbdiNL.js","assets/nodeIcon-iL6AFnZi.js","assets/useToast-C1ZpPbXg.js","assets/sortByProperty-qz-1s69w.js","assets/versions.store-BiGAlubj.js","assets/MainSidebarUserArea-D-l3ZiZx.js","assets/MainSidebarUserArea-yJKeCkOz.css","assets/useBugReporting-BQ-oFo-Y.js","assets/usePageRedirectionHelper-UBkr_KXQ.js","assets/useKeybindings-Ba9jeoZl.js","assets/personalizedTemplatesV3.store-1DMQ5zuk.js","assets/constants-BlMVf5I9.js","assets/MainSidebar-DozJE7kh.css","assets/DataTableView-vekoLyXc.js","assets/useMessage-B0Giqa4b.js","assets/overlay-Dp9PTQlx.js","assets/TimeAgo-DEyMdv_4.js","assets/smartDecimal-Bi50OE4b.js","assets/ProjectIcon-B42VbGbe.js","assets/ProjectIcon-DT95ZcDW.css","assets/EnterpriseEdition.ee-CzoWraCB.js","assets/ResourcesListLayout-CupVq0jM.js","assets/PageViewLayout-CKhCcgRz.js","assets/PageViewLayout-BIiboMgG.css","assets/ProjectSharing-Dl4jUkk_.js","assets/ProjectSharing-BbWB7xaB.css","assets/useProjectPages-BJaX16QB.js","assets/ResourcesListLayout-B8d0Asrt.css","assets/ProjectHeader-CG55_KbA.js","assets/readyToRunWorkflowsV2.store-DzpZNZaD.js","assets/folders.store-BcQ6Wp6V.js","assets/ProjectHeader-CY-3wSig.css","assets/DataTableActions-D1r8nYWw.js","assets/dataTable.store-CqCrYCu5.js","assets/InsightsSummary-BwL8KTCw.js","assets/insights.constants-BkI0n967.js","assets/insights.utils-BwI_ySXw.js","assets/InsightsSummary-BazqPYQ0.css","assets/insights.store-RACppv9v.js","assets/DataTableView-ByKnlVtU.css","assets/DataTableDetailsView-BAvjG9Sl.js","assets/date-picker-CSlIkiDj.js","assets/orderBy-DnR31tty.js","assets/SelectedItemsInfo-B-IcUSLK.js","assets/SelectedItemsInfo-DDbNnY7M.css","assets/useClipboard-Bo6m_x4c.js","assets/ProjectBreadcrumb-Dk0MStHJ.js","assets/ProjectBreadcrumb-CAEDvzuN.css","assets/DataTableDetailsView-CxS46D7a.css","assets/AddDataTableModal-D5F3B2r4.js","assets/dialog-TBTmQpdI.js","assets/Modal-BQle6uj0.js","assets/Modal-C6HnfA6j.css","assets/AddDataTableModal-BzS5Yqag.css","assets/InsightsDashboard-C4pwDFR4.js","assets/InsightsDashboard-DtYvNa8r.css","assets/SettingsMCPView-1r8HDmM4.js","assets/useCanvasOperations-CUB22LeC.js","assets/usePinnedData-CyQ835zq.js","assets/executions.store-CQlrw6PV.js","assets/focusPanel.store-CSnLUdy8.js","assets/sso.store-DrkAY9s8.js","assets/npsSurvey.store-B7_iNEDS.js","assets/roles.store-NBXjdv6j.js","assets/NodeIcon-BBzZc2Cr.js","assets/NodeIcon-C-Ise6x6.css","assets/useMcp-B8mELqLq.js","assets/mcp.store-BysD0rVp.js","assets/useRecentResources-B0Rk_0y2.js","assets/SettingsMCPView-BBO_ZyBU.css","assets/ChatSidebar-B2Ta5I4Z.js","assets/ModalDrawer-DywKbYtl.js","assets/ModalDrawer-B-12esvU.css","assets/useChatHubSidebarState-CVPEM_x0.js","assets/CredentialIcon-3qNhRpjE.js","assets/CredentialIcon-bZrcXcyJ.css","assets/ChatSidebar-DGlWPwKB.css","assets/ChatView-BBnPeZLY.js","assets/VueMarkdown-DZ67GryI.js","assets/ChatView-Bevy5QGn.css","assets/WorkflowsView-BMLRlWW1.js","assets/usage.store-j2Tik6Qj.js","assets/Draggable-CkbgujMO.js","assets/Draggable-DfBtatxg.css","assets/TagsDropdown-DSgoFT2G.js","assets/TagsDropdown-2j57MEiW.css","assets/WorkflowActivator-BZoZGx12.js","assets/useWorkflowActivate-gtG2am_X.js","assets/useWorkflowSaving-C4dZ5T6Z.js","assets/WorkflowActivator-BNp0duVE.css","assets/WorkflowTagsDropdown-BoWhJUGQ.js","assets/readyToRunWorkflows.store-CeAHy3Gw.js","assets/ProjectCardBadge-CqzNY93B.js","assets/ProjectCardBadge-B_wj_mAB.css","assets/EmptySharedSectionActionBox-_gLtN8Od.js","assets/WorkflowsView-2XTsT7zB.css","assets/CredentialsView-CuDtpm7g.js","assets/pickBy-Du5IQGBK.js","assets/externalSecrets.ee.store-BMH2q7Z9.js","assets/CredentialsView-BDOl2A0w.css","assets/ProjectSettings-BWCU1qGD.js","assets/radio-CdRx7dMg.js","assets/ProjectSettings-BQOluc3A.css","assets/ExecutionsView-C2jI6-H5.js","assets/AnimatedSpinner-vlvkUC5d.js","assets/AnimatedSpinner-ChSRgyeI.css","assets/AnnotationTagsDropdown.ee-BC8a01rp.js","assets/ExecutionsTime-CJF2y_Mq.js","assets/ExecutionsTime-qhi9xQEs.css","assets/useExecutionHelpers-BGFecxse.js","assets/dateFormatter-DFjVBgCR.js","assets/ExecutionsView-f-kKRR2k.css","assets/ProjectVariables-BVvA1ujW.js","assets/VariablesUsageBadge-UipGis8s.js","assets/VariablesUsageBadge-CQU1F9NU.css","assets/ProjectVariables-Cw92ZPKE.css","assets/ChangePasswordView-CW15NcGH.js","assets/AuthView-DrMcu08v.js","assets/AuthView-Dg9ZkCud.css","assets/ErrorView-sqHG4cvT.js","assets/ErrorView-D2OMvGTk.css","assets/EntityNotFound-DrJ68Lqz.js","assets/EntityNotFound-DfstTvbZ.css","assets/EntityUnAuthorised-D_y6iEn6.js","assets/EntityUnAuthorised-C6EIQ1Pq.css","assets/ForgotMyPasswordView-ct2WJAh5.js","assets/MainHeader-BONRMH-N.js","assets/useRunWorkflow-CnkYuXK_.js","assets/FileSaver.min-D8bnhVIu.js","assets/usePushConnection-B7EE2Y9F.js","assets/schemaPreview.store-H_WmE5oY.js","assets/assistant.store-CRW9xRe7.js","assets/KeyboardShortcutTooltip-CqWoJrGF.js","assets/KeyboardShortcutTooltip-pRLqnHdh.css","assets/PushConnectionTracker-BxhnBMZB.js","assets/SaveButton-B2VDX1qM.js","assets/SaveButton-Dc01Y2MA.css","assets/useBeforeUnload-DF2JzJ4n.js","assets/useWorkflowsCache-DtVpUl61.js","assets/MainHeader-QMv9Ba5g.css","assets/LogsPanel-BlMvYhqI.js","assets/isEmpty-B9M4671m.js","assets/uniqBy-aD1YpiVl.js","assets/NDVEmptyState-zQlRuQ5F.js","assets/NDVEmptyState-Hm1vFJ4i.css","assets/vue-json-pretty-BlSK1oxV.js","assets/vue-GniKVX87.js","assets/RunDataHtml-BJNWCJaI.js","assets/RunDataHtml-Bu3RZcuV.css","assets/chatPanel.store-kodFX1JM.js","assets/isEmpty-Bi_tkWnE.css","assets/core-QrkR8HgP.js","assets/core-DfWDGJ3H.js","assets/xml-BZFrCZxf.js","assets/LogsPanel-Cc1FOhYu.js","assets/useLogsTreeExpand-CC65Qq1H.js","assets/useLogsTreeExpand-BT6XJR8J.css","assets/LogsPanel-K1M_gOCT.css","assets/DemoFooter-CflhcYrP.js","assets/NodeView-C7uJGuPu.js","assets/ParameterInputList-BCZYU8UQ.js","assets/exports-9spWG404.js","assets/VirtualSchema-BiBmF-FA.js","assets/useTelemetryContext-2dWn5z4h.js","assets/useTelemetryContext-BpnKRIT7.css","assets/TextWithHighlights-4Fm26J2a.js","assets/TextWithHighlights-BgbTzzK2.css","assets/nodeTransforms-BvfzWeb1.js","assets/VirtualSchema-DSZB6gKx.css","assets/ParameterInputList-Brizqu8u.css","assets/Canvas-1CC6KrQC.js","assets/NodeSettings-Ra6VUnnH.js","assets/col-JPNUrDqS.js","assets/useActions-BPH1iZ0J.js","assets/CommunityNodeUpdateInfo-CPJqlJhq.js","assets/semver-DsJndgBW.js","assets/CommunityNodeUpdateInfo-kPDiipF5.css","assets/NodeSettings-CbSfTD_z.css","assets/Canvas-CNvrcRSO.css","assets/useExecutionData-BIXnhI3s.js","assets/useExecutionDebugging-BOKa05bM.js","assets/NodeView-KpAB56Z3.css","assets/WorkflowExecutionsView-BBBgWVzt.js","assets/WorkflowExecutionsInfoAccordion-C-J9oVar.js","assets/WorkflowExecutionsInfoAccordion-CEOvJ-SX.css","assets/WorkflowExecutionsView-9RB5OO5c.css","assets/WorkflowExecutionsLandingPage-Dcpspd_e.js","assets/WorkflowExecutionsLandingPage-DMldlKod.css","assets/WorkflowExecutionsPreview-CONJH5mF.js","assets/WorkflowPreview-Dt_apdcn.js","assets/WorkflowPreview-Bt03akXc.css","assets/WorkflowExecutionsPreview-BkXT82z5.css","assets/SettingsView-BULLUO6z.js","assets/SettingsView-6sirGv9l.css","assets/SettingsLdapView-n-rft8wb.js","assets/table-DwbSg1lE.js","assets/SettingsLdapView-KgMO_1GA.css","assets/SettingsPersonalView-C_bsCiUL.js","assets/auth.eventBus-C4nOf_EB.js","assets/SettingsPersonalView-D6LtKnaF.css","assets/SettingsUsersView-CAEUA7_x.js","assets/SettingsUsersView-CfJcVjkl.css","assets/SettingsCommunityNodesView-DTf1tvf4.js","assets/SettingsCommunityNodesView-m7kLUpJK.css","assets/SettingsApiView-B5gRvI6f.js","assets/apiKeys.store-B-gq_pnY.js","assets/SettingsApiView-Dtl_N9mK.css","assets/SettingsLogStreamingView-Dh49Z2VY.js","assets/logStreaming.store-B7UWuvIf.js","assets/SettingsLogStreamingView-xo-rTSA0.css","assets/SetupView-CSXxmB9c.js","assets/SigninView-BBeSCUS2.js","assets/SigninView-BQgsTN8o.css","assets/SignupView-B1hO3Ltc.js","assets/TemplatesCollectionView-B5HqCB6R.js","assets/TemplatesView-C4pWMD2B.js","assets/TemplatesView-BgdyYmrL.css","assets/TemplateList-BwTtpSSb.js","assets/TemplateList-CNUtq0N7.css","assets/TemplateDetails-BSXglTJa.js","assets/TemplateDetails-DfyKyMyy.css","assets/templateActions-jovoofZV.js","assets/templateTransforms-0i4sTnCn.js","assets/TemplatesCollectionView-klb8FT9y.css","assets/TemplatesWorkflowView-2gzuWjGc.js","assets/TemplatesWorkflowView-CBjRBbmw.css","assets/SetupWorkflowFromTemplateView-D_IyW6Jo.js","assets/SetupTemplateFormStep-BxemMdS7.js","assets/SetupTemplateFormStep-She0GnTz.css","assets/SetupWorkflowFromTemplateView-CU2iGJTa.css","assets/TemplatesSearchView-DRGUJiuP.js","assets/TemplatesSearchView-BfT0LMil.css","assets/VariablesView-9GVQBACv.js","assets/VariablesView-PPP4k5c3.css","assets/SettingsUsageAndPlan-BFTvxC33.js","assets/SettingsUsageAndPlan-pptm91gP.css","assets/SettingsSso-Q5PlMyZy.js","assets/CopyInput-Cwilt729.js","assets/CopyInput-CwgZTYF4.css","assets/SettingsSso-w7Iz4Luy.css","assets/SignoutView-C2zIR9h2.js","assets/SamlOnboarding-Av5Lq_UA.js","assets/SettingsSourceControl-o6a0QHua.js","assets/SettingsSourceControl-DEs9MNB6.css","assets/SettingsExternalSecrets-BcRu8zB1.js","assets/ExternalSecretsProviderConnectionSwitch.ee-Bf_7nIAD.js","assets/ExternalSecretsProviderConnectionSwitch-Df3YK0La.css","assets/SettingsExternalSecrets-CaiOf7cD.css","assets/SettingsProvisioningView-Co8ofsgr.js","assets/SettingsProvisioningView-Dhfda99J.css","assets/WorkerView-Dythc06_.js","assets/chart-C2tFerhP.js","assets/dist-DQo7s2CD.js","assets/WorkerView-4m_NaoAx.css","assets/WorkflowHistory-C6bp-ZMb.js","assets/WorkflowHistory-BmerBiKz.css","assets/WorkflowOnboardingView-BmRX_2z1.js","assets/EvaluationsView-DNdgFkNs.js","assets/evaluation.constants-XN1P-VOH.js","assets/evaluation-CGxdCHrN.css","assets/EvaluationsView-DsfXDJ-U.css","assets/TestRunDetailView-YgiY5E8a.js","assets/TestRunDetailView-DkQcfFP4.css","assets/EvaluationsRootView-BqbUy5rW.js","assets/EvaluationsRootView-BVNlhh2l.css","assets/PrebuiltAgentTemplatesView-CDWunVmJ.js","assets/PrebuiltAgentTemplatesView-jF7HvWnL.css","assets/ProjectRolesView-DRcdZSoA.js","assets/ProjectRolesView-Bpk_JP1z.css","assets/ProjectRoleView-C4_5qeMc.js","assets/ProjectRoleView-Cewy9KCA.css"])))=>i.map(i=>d[i]);
import { C as computed, Gt as unref, L as h, M as createVNode, P as defineComponent, Sn as toDisplayString, T as createBlock, bt as withCtx, et as openBlock, j as createTextVNode, ot as resolveComponent } from "./vue.runtime.esm-bundler-DDuXT-9r.js";
import { _t as I18nT, gt as useI18n } from "./_MapCache-CaP4mhI9.js";
import { t as __vitePreload } from "./preload-helper-CR0ecmWK.js";
import { _ as isNavigationFailure, g as createWebHistory, h as createRouter, m as RouterView } from "./truncate-Zm7rqMgr.js";
import { $n as isAuthenticated, An as useProjectsStore, Di as tryToParseNumber, Js as useRootStore, Li as useUIStore, Qn as isDefaultUser, Xn as isGuest, Zn as isEnterpriseFeatureEnabled, er as shouldEnableMfa, i as usePostHog, ir as useUsersStore, jn as useSourceControlStore, nr as useRBACStore, rc as MfaRequiredError, rr as hasRole, rt as useNodeTypesStore, t as useTelemetry, tr as hasScope, zi as register, zo as useSettingsStore } from "./useTelemetry-DMMCGp2b.js";
import { t as useToast } from "./useToast-C1ZpPbXg.js";
import { La as DATA_TABLE_VIEW, Ma as DATA_TABLE_DETAILS, Oa as ADD_DATA_TABLE_MODAL_KEY, Vt as EDITABLE_CANVAS_VIEWS, Ya as PROJECT_DATA_TABLES, oa as VIEWS, on as EnterpriseEditionFeature, oo as getResourcePermissions } from "./constants-yBDcqULv.js";
import { t as useExternalHooks } from "./useExternalHooks-zp0_PYje.js";
import { t as useNpsSurveyStore } from "./npsSurvey.store-B7_iNEDS.js";
import { t as useCloudPlanStore } from "./cloudPlan.store-DVjbdiNL.js";
import { t as useTemplatesStore } from "./templates.store-CPIqYFhQ.js";
import { _ as useCalloutHelpers } from "./nodeCreator.store-dfEe2Vlw.js";
import { t as useVersionsStore } from "./versions.store-BiGAlubj.js";
import { t as useDataTableStore } from "./dataTable.store-CqCrYCu5.js";
import { t as useRolesStore } from "./roles.store-NBXjdv6j.js";
import { n as useSSOStore } from "./sso.store-DrkAY9s8.js";
import { t as useInsightsStore } from "./insights.store-RACppv9v.js";
import { i as MCP_SETTINGS_VIEW } from "./useMcp-B8mELqLq.js";
import { r as CHAT_VIEW, t as CHAT_CONVERSATION_VIEW } from "./constants-BlMVf5I9.js";
import { t as useRecentResources } from "./useRecentResources-B0Rk_0y2.js";
const authenticatedMiddleware = async (to, _from, next, options) => {
	const url = new URL(window.location.href);
	url.searchParams.delete("redirect");
	const redirect = to.query.redirect ?? encodeURIComponent(`${url.pathname}${url.search}`);
	if (!isAuthenticated(options)) return next({
		name: VIEWS.SIGNIN,
		query: { redirect }
	});
	if (shouldEnableMfa()) {
		if (to.name !== VIEWS.PERSONAL_SETTINGS) return next({
			name: VIEWS.PERSONAL_SETTINGS,
			query: { redirect }
		});
		return;
	}
};
const enterpriseMiddleware = async (_to, _from, next, options) => {
	if (!isEnterpriseFeatureEnabled(options)) return next({ name: VIEWS.HOMEPAGE });
};
const guestMiddleware = async (to, _from, next) => {
	if (!isGuest()) {
		const redirect = to.query.redirect ?? "";
		if (redirect.startsWith("/")) return next(redirect);
		try {
			if (new URL(redirect).origin === window.location.origin) return next(redirect);
		} catch {}
		return next({ name: VIEWS.HOMEPAGE });
	}
};
function inferProjectIdFromRoute(to) {
	const routeParts = to.path.split("/");
	const projectsIndex = routeParts.indexOf("projects");
	return routeParts[projectsIndex !== -1 ? projectsIndex + 1 : -1];
}
function inferResourceTypeFromRoute(to) {
	const routeParts = to.path.split("/");
	const routeMap = {
		workflow: "workflows",
		credential: "credentials",
		user: "users",
		variable: "variables",
		sourceControl: "source-control",
		externalSecret: "external-secrets"
	};
	const isResource = (key) => routeParts.includes(routeMap[key]);
	for (const resource of Object.keys(routeMap)) if (isResource(resource)) return resource;
}
function inferResourceIdFromRoute(to) {
	return to.params.id ?? to.params.name;
}
const rbacMiddleware = async (to, _from, next, { scope, options }) => {
	const projectId = inferProjectIdFromRoute(to);
	const resourceType = inferResourceTypeFromRoute(to);
	if (!hasScope({
		scope,
		projectId,
		resourceType,
		resourceId: resourceType ? inferResourceIdFromRoute(to) : void 0,
		options
	})) return next({ name: VIEWS.HOMEPAGE });
};
const roleMiddleware = async (_to, _from, next, checkRoles) => {
	if (!hasRole(checkRoles)) return next({ name: VIEWS.HOMEPAGE });
};
const customMiddleware = async (to, from, next, isValid) => {
	if (!isValid({
		to,
		from,
		next
	})) return next({ name: VIEWS.HOMEPAGE });
};
const defaultUserMiddleware = async (_to, _from, next) => {
	if (!isDefaultUser()) return next({ name: VIEWS.HOMEPAGE });
};
const middleware = {
	authenticated: authenticatedMiddleware,
	custom: customMiddleware,
	defaultUser: defaultUserMiddleware,
	enterprise: enterpriseMiddleware,
	guest: guestMiddleware,
	rbac: rbacMiddleware,
	role: roleMiddleware
};
var SourceControlInitializationErrorMessage_default = /* @__PURE__ */ defineComponent({
	__name: "SourceControlInitializationErrorMessage",
	setup(__props) {
		const i18n$2 = useI18n();
		return (_ctx, _cache) => {
			const _component_RouterLink = resolveComponent("RouterLink");
			return openBlock(), createBlock(unref(I18nT), {
				keypath: "settings.sourceControl.connection.error.message",
				tag: "div",
				scope: "global"
			}, {
				link: withCtx(() => [createVNode(_component_RouterLink, { to: { name: unref(VIEWS).SOURCE_CONTROL } }, {
					default: withCtx(() => [createTextVNode(toDisplayString(unref(i18n$2).baseText("settings.sourceControl.connection.error.link")), 1)]),
					_: 1
				}, 8, ["to"])]),
				_: 1
			});
		};
	}
});
var i18n$1 = useI18n();
var MainSidebar$3 = async () => await __vitePreload(() => import("./MainSidebar-CR7IKmug.js"), __vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34]));
var DataTableView = async () => await __vitePreload(() => import("./DataTableView-vekoLyXc.js"), __vite__mapDeps([35,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,36,24,20,37,38,39,25,40,41,42,43,44,45,46,47,48,49,50,51,52,22,53,54,55,56,57,58,59,60,61]));
var DataTableDetailsView = async () => await __vitePreload(() => import("./DataTableDetailsView-BAvjG9Sl.js"), __vite__mapDeps([62,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,63,36,24,20,37,64,40,41,65,66,67,54,55,68,69,70]));
const DataTableModule = {
	id: "data-table",
	name: "Data Table",
	description: "Manage and store data efficiently with the Data Table module.",
	icon: "database",
	modals: [{
		key: ADD_DATA_TABLE_MODAL_KEY,
		component: async () => await __vitePreload(() => import("./AddDataTableModal-D5F3B2r4.js"), __vite__mapDeps([71,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,72,37,24,20,73,74,55,75])),
		initialState: { open: false }
	}],
	routes: [
		{
			name: DATA_TABLE_VIEW,
			path: "/home/datatables",
			components: {
				default: DataTableView,
				sidebar: MainSidebar$3
			},
			meta: { middleware: ["authenticated", "custom"] }
		},
		{
			name: PROJECT_DATA_TABLES,
			path: "datatables/:new(new)?",
			props: true,
			components: {
				default: DataTableView,
				sidebar: MainSidebar$3
			},
			meta: {
				projectRoute: true,
				middleware: ["authenticated", "custom"]
			}
		},
		{
			name: DATA_TABLE_DETAILS,
			path: "datatables/:id",
			props: true,
			components: {
				default: DataTableDetailsView,
				sidebar: MainSidebar$3
			},
			meta: {
				projectRoute: true,
				middleware: ["authenticated", "custom"]
			}
		}
	],
	projectTabs: {
		overview: [{
			label: i18n$1.baseText("dataTable.dataTables"),
			value: DATA_TABLE_VIEW,
			tag: i18n$1.baseText("generic.betaProper"),
			to: { name: DATA_TABLE_VIEW }
		}],
		project: [{
			label: i18n$1.baseText("dataTable.dataTables"),
			value: PROJECT_DATA_TABLES,
			tag: i18n$1.baseText("generic.betaProper"),
			dynamicRoute: {
				name: PROJECT_DATA_TABLES,
				includeProjectId: true
			}
		}]
	},
	resources: [{
		key: "dataTable",
		displayName: "Data Table"
	}]
};
var resources = /* @__PURE__ */ new Map();
function registerResource(metadata) {
	resources.set(metadata.key, metadata);
}
var MainSidebar$2 = async () => await __vitePreload(() => import("./MainSidebar-CR7IKmug.js"), __vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34]));
var InsightsDashboard = async () => await __vitePreload(() => import("./InsightsDashboard-C4pwDFR4.js"), __vite__mapDeps([76,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,72,37,24,20,39,25,40,41,26,30,22,46,47,56,57,58,59,60,77]));
const InsightsModule = {
	id: "insights",
	name: "Insights",
	description: "Provides insights and analytics features for projects.",
	icon: "chart-column-decreasing",
	routes: [{
		path: "/insights",
		beforeEnter() {
			return useInsightsStore().isInsightsEnabled || { name: VIEWS.NOT_FOUND };
		},
		components: {
			default: RouterView,
			sidebar: MainSidebar$2
		},
		meta: {
			middleware: ["authenticated", "rbac"],
			middlewareOptions: { rbac: { scope: ["insights:list"] } }
		},
		children: [{
			path: ":insightType?",
			name: VIEWS.INSIGHTS,
			beforeEnter(to) {
				if (to.params.insightType) return true;
				return Object.assign(to, { params: {
					...to.params,
					insightType: "total"
				} });
			},
			component: InsightsDashboard,
			props: true
		}]
	}]
};
var i18n = useI18n();
var SettingsMCPView = async () => await __vitePreload(() => import("./SettingsMCPView-1r8HDmM4.js"), __vite__mapDeps([78,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,79,67,80,52,81,82,40,41,83,84,85,26,86,87,33,88,89,55,60,58,57,90,91]));
const MCPModule = {
	id: "mcp",
	name: "MCP Access",
	description: "Access your n8n instance through MCP clients",
	icon: "mcp",
	routes: [{
		path: "mcp",
		name: MCP_SETTINGS_VIEW,
		components: { settingsView: SettingsMCPView },
		meta: {
			middleware: ["authenticated", "custom"],
			telemetry: { pageCategory: "settings" }
		}
	}],
	settingsPages: [{
		id: "settings-mcp",
		icon: "mcp",
		label: i18n.baseText("settings.mcp"),
		position: "top",
		route: { to: { name: MCP_SETTINGS_VIEW } }
	}]
};
var ChatSidebar = async () => await __vitePreload(() => import("./ChatSidebar-B2Ta5I4Z.js"), __vite__mapDeps([92,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,72,37,93,94,36,24,20,27,28,95,33,96,97,98]));
var ChatView = async () => await __vitePreload(() => import("./ChatView-BBnPeZLY.js"), __vite__mapDeps([99,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,72,37,24,20,100,73,74,67,95,33,96,97,101]));
var modules = [
	InsightsModule,
	DataTableModule,
	MCPModule,
	{
		id: "chat-hub",
		name: "Chat",
		description: "Interact with various LLM models or your n8n AI agents.",
		icon: "chat",
		modals: [],
		routes: [{
			name: CHAT_VIEW,
			path: "/ask",
			components: {
				default: ChatView,
				sidebar: ChatSidebar
			},
			meta: { middleware: ["authenticated", "custom"] }
		}, {
			name: CHAT_CONVERSATION_VIEW,
			path: "/ask/:id",
			components: {
				default: ChatView,
				sidebar: ChatSidebar
			},
			meta: { middleware: ["authenticated", "custom"] }
		}],
		projectTabs: {
			overview: [],
			project: []
		},
		resources: [{
			key: "chat",
			displayName: "Chat"
		}]
	}
];
const registerModuleResources = () => {
	modules.forEach((module) => {
		module.resources?.forEach((resource) => {
			registerResource(resource);
		});
	});
};
const registerModuleProjectTabs = () => {
	const uiStore = useUIStore();
	modules.forEach((module) => {
		if (module.projectTabs) {
			if (module.projectTabs.overview) uiStore.registerCustomTabs("overview", module.id, module.projectTabs.overview);
			if (module.projectTabs.project) uiStore.registerCustomTabs("project", module.id, module.projectTabs.project);
			if (module.projectTabs.shared) uiStore.registerCustomTabs("shared", module.id, module.projectTabs.shared);
		}
	});
};
const registerModuleSettingsPages = () => {
	const uiStore = useUIStore();
	modules.forEach((module) => {
		if (module.settingsPages && module.settingsPages.length > 0) uiStore.registerSettingsPages(module.id, module.settingsPages);
	});
};
var checkModuleAvailability = (options) => {
	if (!options?.to?.meta?.moduleName || typeof options.to.meta.moduleName !== "string") return true;
	return useSettingsStore().isModuleActive(options.to.meta.moduleName);
};
const registerModuleModals = () => {
	modules.forEach((module) => {
		module.modals?.forEach((modalDef) => {
			register(modalDef);
		});
	});
	useUIStore().initializeModalsFromRegistry();
};
const registerModuleRoutes = (router$1) => {
	modules.forEach((module) => {
		module.routes?.forEach((route) => {
			const enhancedRoute = {
				...route,
				meta: {
					...route.meta,
					moduleName: module.id,
					...route.meta?.middleware?.includes("custom") && { middlewareOptions: {
						...route.meta?.middlewareOptions,
						custom: checkModuleAvailability
					} }
				}
			};
			if (route.meta?.projectRoute) router$1.addRoute(VIEWS.PROJECT_DETAILS, enhancedRoute);
			else if (route.meta?.telemetry && route.meta.telemetry.pageCategory === "settings") router$1.addRoute(VIEWS.SETTINGS, enhancedRoute);
			else router$1.addRoute(enhancedRoute);
		});
	});
};
const state = { initialized: false };
var authenticatedFeaturesInitialized = false;
async function initializeCore() {
	if (state.initialized) return;
	const settingsStore = useSettingsStore();
	const usersStore = useUsersStore();
	const versionsStore = useVersionsStore();
	const ssoStore = useSSOStore();
	const uiStore = useUIStore();
	const toast = useToast();
	const i18n$2 = useI18n();
	registerAuthenticationHooks();
	try {
		await settingsStore.initialize();
	} catch (error) {
		toast.showToast({
			title: i18n$2.baseText("startupError"),
			message: i18n$2.baseText("startupError.message"),
			type: "error",
			duration: 0
		});
	}
	ssoStore.initialize({
		authenticationMethod: settingsStore.userManagement.authenticationMethod,
		config: settingsStore.settings.sso,
		features: {
			saml: settingsStore.isEnterpriseFeatureEnabled[EnterpriseEditionFeature.Saml],
			ldap: settingsStore.isEnterpriseFeatureEnabled[EnterpriseEditionFeature.Ldap],
			oidc: settingsStore.isEnterpriseFeatureEnabled[EnterpriseEditionFeature.Oidc]
		}
	});
	const banners = [];
	if (settingsStore.isEnterpriseFeatureEnabled.showNonProdBanner) banners.push("NON_PRODUCTION_LICENSE");
	if (!(settingsStore.settings.banners?.dismissed || []).includes("V1") && settingsStore.settings.versionCli.startsWith("1.")) banners.push("V1");
	uiStore.initialize({ banners });
	versionsStore.initialize(settingsStore.settings.versionNotifications);
	useExternalHooks().run("app.mount");
	if (!settingsStore.isPreviewMode) await usersStore.initialize({ quota: settingsStore.userManagement.quota });
	state.initialized = true;
}
async function initializeAuthenticatedFeatures(initialized = authenticatedFeaturesInitialized, routeName) {
	if (initialized) return;
	if (!useUsersStore().currentUser) return;
	const i18n$2 = useI18n();
	const toast = useToast();
	const sourceControlStore = useSourceControlStore();
	const settingsStore = useSettingsStore();
	const rootStore = useRootStore();
	const nodeTypesStore = useNodeTypesStore();
	const cloudPlanStore = useCloudPlanStore();
	const projectsStore = useProjectsStore();
	const rolesStore = useRolesStore();
	const insightsStore = useInsightsStore();
	const uiStore = useUIStore();
	const versionsStore = useVersionsStore();
	const dataTableStore = useDataTableStore();
	if (sourceControlStore.isEnterpriseSourceControlEnabled) try {
		await sourceControlStore.getPreferences();
	} catch (e) {
		toast.showMessage({
			title: i18n$2.baseText("settings.sourceControl.connection.error"),
			message: h(SourceControlInitializationErrorMessage_default),
			type: "error",
			duration: 0
		});
		console.error("Failed to initialize source control store", e);
	}
	if (rootStore.defaultLocale !== "en") await nodeTypesStore.getNodeTranslationHeaders();
	if (settingsStore.isCloudDeployment) cloudPlanStore.initialize().then(() => {
		if (cloudPlanStore.userIsTrialing) if (cloudPlanStore.trialExpired) uiStore.pushBannerToStack("TRIAL_OVER");
		else uiStore.pushBannerToStack("TRIAL");
		else if (cloudPlanStore.currentUserCloudInfo?.confirmed === false) uiStore.pushBannerToStack("EMAIL_CONFIRMATION");
	}).catch((error) => {
		console.error("Failed to initialize cloud plan store:", error);
	});
	if (settingsStore.isDataTableFeatureEnabled) dataTableStore.fetchDataTableSize().then(({ quotaStatus }) => {
		if (quotaStatus === "error") uiStore.pushBannerToStack("DATA_TABLE_STORAGE_LIMIT_ERROR");
		else if (quotaStatus === "warn") uiStore.pushBannerToStack("DATA_TABLE_STORAGE_LIMIT_WARNING");
	}).catch((error) => {
		console.error("Failed to fetch data table limits:", error);
	});
	if (insightsStore.isSummaryEnabled) insightsStore.weeklySummary.execute();
	if (!settingsStore.isPreviewMode && routeName !== VIEWS.DEMO) versionsStore.checkForNewVersions();
	await Promise.all([
		projectsStore.getMyProjects(),
		projectsStore.getPersonalProject(),
		projectsStore.getProjectsCount(),
		rolesStore.fetchRoles()
	]);
	registerModuleResources();
	registerModuleProjectTabs();
	registerModuleModals();
	registerModuleSettingsPages();
	authenticatedFeaturesInitialized = true;
}
function registerAuthenticationHooks() {
	const rootStore = useRootStore();
	const usersStore = useUsersStore();
	const cloudPlanStore = useCloudPlanStore();
	const postHogStore = usePostHog();
	const uiStore = useUIStore();
	const npsSurveyStore = useNpsSurveyStore();
	const telemetry = useTelemetry();
	const RBACStore = useRBACStore();
	const settingsStore = useSettingsStore();
	usersStore.registerLoginHook((user) => {
		RBACStore.setGlobalScopes(user.globalScopes ?? []);
		telemetry.identify(rootStore.instanceId, user.id, rootStore.versionCli);
		postHogStore.init(user.featureFlags);
		npsSurveyStore.setupNpsSurveyOnLogin(user.id, user.settings);
		settingsStore.getModuleSettings();
	});
	usersStore.registerLogoutHook(() => {
		uiStore.clearBannerStack();
		npsSurveyStore.resetNpsSurveyOnLogOut();
		postHogStore.reset();
		cloudPlanStore.reset();
		telemetry.reset();
		RBACStore.setGlobalScopes([]);
	});
}
var MainSidebar$1 = async () => await __vitePreload(() => import("./MainSidebar-CR7IKmug.js"), __vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34]));
var WorkflowsView = async () => await __vitePreload(() => import("./WorkflowsView-BMLRlWW1.js"), __vite__mapDeps([102,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,36,24,37,38,39,25,40,41,84,103,104,105,42,86,87,106,107,108,109,110,82,68,69,52,111,112,43,44,45,46,47,48,49,113,32,50,51,53,88,89,114,115,116,56,57,58,59,60,117]));
var CredentialsView = async () => await __vitePreload(() => import("./CredentialsView-CuDtpm7g.js"), __vite__mapDeps([118,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,36,24,20,37,119,38,39,25,40,41,42,43,44,45,46,47,48,49,50,51,52,22,53,114,115,116,96,97,56,57,58,59,60,120,121]));
var ProjectSettings = async () => await __vitePreload(() => import("./ProjectSettings-BWCU1qGD.js"), __vite__mapDeps([122,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,72,37,24,20,123,25,40,41,85,26,30,22,50,51,48,52,53,46,47,124]));
var ExecutionsView = async () => await __vitePreload(() => import("./ExecutionsView-C2jI6-H5.js"), __vite__mapDeps([125,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,63,36,24,20,37,39,40,41,26,126,127,128,106,107,112,65,66,30,22,50,51,48,52,53,129,130,131,132,81,56,57,58,59,60,133]));
var ProjectVariables = async () => await __vitePreload(() => import("./ProjectVariables-BVvA1ujW.js"), __vite__mapDeps([134,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,36,24,20,37,119,39,25,40,41,26,42,43,44,45,46,47,48,49,67,30,22,50,51,52,53,56,57,58,59,60,135,136,137]));
var checkProjectAvailability = (to) => {
	if (!to?.params.projectId) return true;
	return !!useProjectsStore().myProjects.find((p) => to?.params.projectId === p.id);
};
var commonChildRoutes = [
	{
		path: "workflows",
		components: {
			default: WorkflowsView,
			sidebar: MainSidebar$1
		},
		meta: {
			middleware: ["authenticated", "custom"],
			middlewareOptions: { custom: (options) => checkProjectAvailability(options?.to) }
		}
	},
	{
		path: "credentials/:credentialId?",
		props: true,
		components: {
			default: CredentialsView,
			sidebar: MainSidebar$1
		},
		meta: {
			middleware: ["authenticated", "custom"],
			middlewareOptions: { custom: (options) => checkProjectAvailability(options?.to) }
		}
	},
	{
		path: "executions",
		components: {
			default: ExecutionsView,
			sidebar: MainSidebar$1
		},
		meta: {
			middleware: ["authenticated", "custom"],
			middlewareOptions: { custom: (options) => checkProjectAvailability(options?.to) }
		}
	},
	{
		path: "folders/:folderId?/workflows",
		components: {
			default: WorkflowsView,
			sidebar: MainSidebar$1
		},
		meta: {
			middleware: ["authenticated", "custom"],
			middlewareOptions: { custom: (options) => checkProjectAvailability(options?.to) }
		}
	},
	{
		path: "variables",
		components: {
			default: ProjectVariables,
			sidebar: MainSidebar$1
		},
		meta: {
			middleware: ["authenticated", "custom"],
			middlewareOptions: { custom: (options) => checkProjectAvailability(options?.to) }
		}
	}
];
var commonChildRouteExtensions = {
	home: [
		{ name: VIEWS.WORKFLOWS },
		{ name: VIEWS.CREDENTIALS },
		{ name: VIEWS.EXECUTIONS },
		{ name: VIEWS.FOLDERS },
		{ name: VIEWS.HOME_VARIABLES }
	],
	projects: [
		{ name: VIEWS.PROJECTS_WORKFLOWS },
		{ name: VIEWS.PROJECTS_CREDENTIALS },
		{ name: VIEWS.PROJECTS_EXECUTIONS },
		{ name: VIEWS.PROJECTS_FOLDERS },
		{ name: VIEWS.PROJECTS_VARIABLES }
	]
};
const projectsRoutes = [
	{
		path: "/projects",
		name: VIEWS.PROJECTS,
		meta: { middleware: ["authenticated"] },
		redirect: "/home/workflows",
		children: [{
			name: VIEWS.PROJECT_DETAILS,
			path: ":projectId",
			meta: { middleware: ["authenticated"] },
			redirect: { name: VIEWS.PROJECTS_WORKFLOWS },
			children: commonChildRoutes.map((route, idx) => ({
				...route,
				name: commonChildRouteExtensions.projects[idx].name
			})).concat([{
				path: "settings",
				name: VIEWS.PROJECT_SETTINGS,
				components: {
					default: ProjectSettings,
					sidebar: MainSidebar$1
				},
				meta: {
					middleware: ["authenticated", "custom"],
					middlewareOptions: { custom: (options) => {
						return !!getResourcePermissions(useProjectsStore().myProjects.find((p) => p.id === options?.to.params.projectId)?.scopes).project.update;
					} }
				}
			}])
		}]
	},
	{
		path: "/home",
		name: VIEWS.HOMEPAGE,
		meta: { middleware: ["authenticated"] },
		redirect: "/home/workflows",
		children: commonChildRoutes.map((route, idx) => ({
			...route,
			name: commonChildRouteExtensions.home[idx].name
		}))
	},
	{
		path: "/shared",
		name: VIEWS.SHARED_WITH_ME,
		meta: { middleware: ["authenticated"] },
		redirect: "/shared/workflows",
		children: [{
			path: "workflows",
			name: VIEWS.SHARED_WORKFLOWS,
			components: {
				default: WorkflowsView,
				sidebar: MainSidebar$1
			},
			meta: {
				middleware: ["authenticated", "custom"],
				middlewareOptions: { custom: (options) => checkProjectAvailability(options?.to) }
			}
		}, {
			path: "credentials/:credentialId?",
			props: true,
			name: VIEWS.SHARED_CREDENTIALS,
			components: {
				default: CredentialsView,
				sidebar: MainSidebar$1
			},
			meta: {
				middleware: ["authenticated", "custom"],
				middlewareOptions: { custom: (options) => checkProjectAvailability(options?.to) }
			}
		}]
	},
	{
		path: "/workflows",
		redirect: "/home/workflows"
	},
	{
		path: "/credentials",
		redirect: "/home/credentials"
	},
	{
		path: "/executions",
		redirect: "/home/executions"
	},
	{
		path: "/variables",
		redirect: "/home/variables"
	}
];
const useEnvFeatureFlag = () => {
	const settingsStore = useSettingsStore();
	return { check: computed(() => (flag) => {
		const key = `N8N_ENV_FEAT_${flag}`;
		const settingsProvidedEnvFeatFlag = settingsStore.settings.envFeatureFlags?.[key];
		if (settingsProvidedEnvFeatFlag !== void 0) return settingsProvidedEnvFeatFlag !== "false" && !!settingsProvidedEnvFeatFlag;
		const buildTimeValue = {
			"BASE_URL": "/",
			"DEV": false,
			"LEGACY": false,
			"MODE": "production",
			"PROD": true,
			"SSR": false,
			"VUE_APP_PUBLIC_PATH": "/"
		}[key];
		if (buildTimeValue !== void 0) return buildTimeValue !== "false" && !!buildTimeValue;
		return false;
	}) };
};
var ChangePasswordView = async () => await __vitePreload(() => import("./ChangePasswordView-CW15NcGH.js"), __vite__mapDeps([138,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,24,20,83,139,140]));
var ErrorView = async () => await __vitePreload(() => import("./ErrorView-sqHG4cvT.js"), __vite__mapDeps([141,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,142]));
var EntityNotFound = async () => await __vitePreload(() => import("./EntityNotFound-DrJ68Lqz.js"), __vite__mapDeps([143,1,2,3,4,5,6,7,8,9,10,11,12,13,144]));
var EntityUnAuthorised = async () => await __vitePreload(() => import("./EntityUnAuthorised-D_y6iEn6.js"), __vite__mapDeps([145,1,2,3,4,5,6,7,8,9,10,11,12,13,146]));
var ForgotMyPasswordView = async () => await __vitePreload(() => import("./ForgotMyPasswordView-ct2WJAh5.js"), __vite__mapDeps([147,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,24,20,83,139,140]));
var MainHeader = async () => await __vitePreload(() => import("./MainHeader-BONRMH-N.js"), __vite__mapDeps([148,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,149,24,79,67,80,52,81,82,110,36,37,84,150,151,152,153,113,51,48,40,41,26,42,154,155,156,157,158,106,107,108,109,68,69,111,112,159,30,160,88,161]));
var MainSidebar = async () => await __vitePreload(() => import("./MainSidebar-CR7IKmug.js"), __vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34]));
var LogsPanel = async () => await __vitePreload(() => import("./LogsPanel-BlMvYhqI.js"), __vite__mapDeps([162,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,163,24,150,164,165,166,167,168,152,153,169,170,67,80,171,131,132,120,172,149,79,52,81,82,110,36,37,84,173,174,175,100,176,177,126,127,86,87,178,154,155,31,179]));
var DemoFooter = async () => await __vitePreload(() => import("./DemoFooter-CflhcYrP.js"), __vite__mapDeps([180,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,163,24,150,164,165,166,167,168,152,153,169,170,67,80,171,131,132,120,172,149,79,52,81,82,110,36,37,84,173,174,175,100,176,177,126,127,86,87,178,154,155,31,179]));
var NodeView = async () => await __vitePreload(() => import("./NodeView-C7uJGuPu.js"), __vite__mapDeps([181,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,182,163,24,150,164,165,166,167,168,152,153,169,170,67,80,171,131,132,120,172,183,149,79,52,81,82,110,36,37,84,63,72,184,104,105,185,186,86,87,187,188,189,190,191,192,193,194,195,55,196,197,198,199,154,155,31,200,26,159,30,113,201,202,203]));
var WorkflowExecutionsView = async () => await __vitePreload(() => import("./WorkflowExecutionsView-BBBgWVzt.js"), __vite__mapDeps([204,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,63,36,24,37,79,67,80,52,81,82,84,26,128,106,107,112,30,110,129,130,205,206,131,132,207]));
var WorkflowExecutionsLandingPage = async () => await __vitePreload(() => import("./WorkflowExecutionsLandingPage-Dcpspd_e.js"), __vite__mapDeps([208,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,36,24,20,37,84,110,21,22,82,205,206,209]));
var WorkflowExecutionsPreview = async () => await __vitePreload(() => import("./WorkflowExecutionsPreview-CONJH5mF.js"), __vite__mapDeps([210,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,36,24,20,37,26,128,106,107,211,81,212,30,22,202,131,132,213]));
var SettingsView = async () => await __vitePreload(() => import("./SettingsView-BULLUO6z.js"), __vite__mapDeps([214,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,215]));
var SettingsLdapView = async () => await __vitePreload(() => import("./SettingsLdapView-n-rft8wb.js"), __vite__mapDeps([216,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,168,17,18,19,36,24,20,37,217,83,26,30,22,218]));
var SettingsPersonalView = async () => await __vitePreload(() => import("./SettingsPersonalView-C_bsCiUL.js"), __vite__mapDeps([219,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,24,20,83,220,22,221]));
var SettingsUsersView = async () => await __vitePreload(() => import("./SettingsUsersView-CAEUA7_x.js"), __vite__mapDeps([222,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,24,20,123,83,26,42,67,30,22,132,223]));
var SettingsCommunityNodesView = async () => await __vitePreload(() => import("./SettingsCommunityNodesView-DTf1tvf4.js"), __vite__mapDeps([224,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,149,24,79,67,80,52,81,82,110,36,37,84,197,151,152,153,113,51,48,225]));
var SettingsApiView = async () => await __vitePreload(() => import("./SettingsApiView-B5gRvI6f.js"), __vite__mapDeps([226,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,194,36,24,20,37,227,26,30,22,228]));
var SettingsLogStreamingView = async () => await __vitePreload(() => import("./SettingsLogStreamingView-Dh49Z2VY.js"), __vite__mapDeps([229,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,194,36,24,20,37,230,26,30,22,231]));
var SetupView = async () => await __vitePreload(() => import("./SetupView-CSXxmB9c.js"), __vite__mapDeps([232,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,24,20,83,139,140]));
var SigninView = async () => await __vitePreload(() => import("./SigninView-BBeSCUS2.js"), __vite__mapDeps([233,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,24,20,83,220,139,140,234]));
var SignupView = async () => await __vitePreload(() => import("./SignupView-B1hO3Ltc.js"), __vite__mapDeps([235,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,24,20,83,139,140]));
var TemplatesCollectionView = async () => await __vitePreload(() => import("./TemplatesCollectionView-B5HqCB6R.js"), __vite__mapDeps([236,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,38,237,238,86,23,87,239,240,20,241,21,22,242,243,244,189,245]));
var TemplatesWorkflowView = async () => await __vitePreload(() => import("./TemplatesWorkflowView-2gzuWjGc.js"), __vite__mapDeps([246,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,24,20,38,237,238,86,23,87,211,81,212,241,21,22,242,243,244,189,247]));
var SetupWorkflowFromTemplateView = async () => await __vitePreload(() => import("./SetupWorkflowFromTemplateView-D_IyW6Jo.js"), __vite__mapDeps([248,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,237,238,86,23,87,20,249,244,189,250,21,22,243,251]));
var TemplatesSearchView = async () => await __vitePreload(() => import("./TemplatesSearchView-DRGUJiuP.js"), __vite__mapDeps([252,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,24,20,64,38,237,238,86,23,87,239,240,21,22,253]));
var VariablesView = async () => await __vitePreload(() => import("./VariablesView-9GVQBACv.js"), __vite__mapDeps([254,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,36,24,20,37,119,25,40,41,26,42,43,44,45,46,47,48,49,67,30,22,135,136,255]));
var SettingsUsageAndPlan = async () => await __vitePreload(() => import("./SettingsUsageAndPlan-BFTvxC33.js"), __vite__mapDeps([256,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,72,37,24,20,103,26,30,22,257]));
var SettingsSso = async () => await __vitePreload(() => import("./SettingsSso-Q5PlMyZy.js"), __vite__mapDeps([258,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,36,24,20,37,83,26,259,67,260,30,22,261]));
var SignoutView = async () => await __vitePreload(() => import("./SignoutView-C2zIR9h2.js"), __vite__mapDeps([262,4,5,6,7,8,15,10,16,17,18,19,24,20]));
var SamlOnboarding = async () => await __vitePreload(() => import("./SamlOnboarding-Av5Lq_UA.js"), __vite__mapDeps([263,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,24,20,83,139,140]));
var SettingsSourceControl = async () => await __vitePreload(() => import("./SettingsSourceControl-o6a0QHua.js"), __vite__mapDeps([264,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,36,24,20,37,26,259,67,260,30,22,265]));
var SettingsExternalSecrets = async () => await __vitePreload(() => import("./SettingsExternalSecrets-BcRu8zB1.js"), __vite__mapDeps([266,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,24,20,26,30,22,267,120,268,269]));
var SettingsProvisioningView = async () => await __vitePreload(() => import("./SettingsProvisioningView-Co8ofsgr.js"), __vite__mapDeps([270,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,24,20,271]));
var WorkerView = async () => await __vitePreload(() => import("./WorkerView-Dythc06_.js"), __vite__mapDeps([272,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,273,149,24,79,67,80,52,81,82,110,36,37,84,274,151,152,153,113,51,48,25,26,156,30,275]));
var WorkflowHistory = async () => await __vitePreload(() => import("./WorkflowHistory-C6bp-ZMb.js"), __vite__mapDeps([276,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,24,20,150,26,211,81,212,30,22,277]));
var WorkflowOnboardingView = async () => await __vitePreload(() => import("./WorkflowOnboardingView-BmRX_2z1.js"), __vite__mapDeps([278,8,5,6,15,7,10,16,17,18,19,21,22]));
var EvaluationsView = async () => await __vitePreload(() => import("./EvaluationsView-DNdgFkNs.js"), __vite__mapDeps([279,1,2,3,4,5,6,7,8,9,10,11,12,13,273,15,16,17,18,19,24,20,217,64,274,126,127,280,281,132,282]));
var TestRunDetailView = async () => await __vitePreload(() => import("./TestRunDetailView-YgiY5E8a.js"), __vite__mapDeps([283,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,24,20,217,64,160,280,281,132,284]));
var EvaluationRootView = async () => await __vitePreload(() => import("./EvaluationsRootView-BqbUy5rW.js"), __vite__mapDeps([285,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,79,67,80,52,81,82,103,26,30,286]));
var PrebuiltAgentTemplatesView = async () => await __vitePreload(() => import("./PrebuiltAgentTemplatesView-CDWunVmJ.js"), __vite__mapDeps([287,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,86,87,44,45,288]));
function getTemplatesRedirect(defaultRedirect) {
	if (!useSettingsStore().isTemplatesEnabled) return { name: `${defaultRedirect}` || VIEWS.NOT_FOUND };
	return false;
}
const routes = [
	{
		path: "/",
		redirect: "/home/workflows",
		meta: { middleware: ["authenticated"] }
	},
	{
		path: "/collections/:id",
		name: VIEWS.COLLECTION,
		components: {
			default: TemplatesCollectionView,
			sidebar: MainSidebar
		},
		meta: {
			templatesEnabled: true,
			telemetry: { getProperties(route) {
				const templatesStore = useTemplatesStore();
				return {
					collection_id: route.params.id,
					wf_template_repo_session_id: templatesStore.currentSessionId
				};
			} },
			getRedirect: getTemplatesRedirect,
			middleware: ["authenticated"]
		}
	},
	{
		path: "/templates/agents",
		name: VIEWS.PRE_BUILT_AGENT_TEMPLATES,
		components: {
			default: PrebuiltAgentTemplatesView,
			sidebar: MainSidebar
		},
		meta: {
			templatesEnabled: true,
			getRedirect: getTemplatesRedirect,
			middleware: ["authenticated"]
		},
		beforeEnter: (_to, _from, next) => {
			const calloutHelpers = useCalloutHelpers();
			const templatesStore = useTemplatesStore();
			if (!calloutHelpers.isPreBuiltAgentsCalloutVisible.value) window.location.href = templatesStore.websiteTemplateRepositoryURL;
			else next();
		}
	},
	{
		path: "/templates/:id",
		name: VIEWS.TEMPLATE,
		components: {
			default: TemplatesWorkflowView,
			sidebar: MainSidebar
		},
		meta: {
			templatesEnabled: true,
			getRedirect: getTemplatesRedirect,
			telemetry: { getProperties(route) {
				const templatesStore = useTemplatesStore();
				return {
					template_id: tryToParseNumber(Array.isArray(route.params.id) ? route.params.id[0] : route.params.id),
					wf_template_repo_session_id: templatesStore.currentSessionId
				};
			} },
			middleware: ["authenticated"]
		}
	},
	{
		path: "/templates/:id/setup",
		name: VIEWS.TEMPLATE_SETUP,
		components: {
			default: SetupWorkflowFromTemplateView,
			sidebar: MainSidebar
		},
		meta: {
			templatesEnabled: true,
			getRedirect: getTemplatesRedirect,
			telemetry: { getProperties(route) {
				const templatesStore = useTemplatesStore();
				return {
					template_id: tryToParseNumber(Array.isArray(route.params.id) ? route.params.id[0] : route.params.id),
					wf_template_repo_session_id: templatesStore.currentSessionId
				};
			} },
			middleware: ["authenticated"]
		}
	},
	{
		path: "/templates/",
		name: VIEWS.TEMPLATES,
		components: {
			default: TemplatesSearchView,
			sidebar: MainSidebar
		},
		meta: {
			templatesEnabled: true,
			getRedirect: getTemplatesRedirect,
			scrollOffset: 0,
			telemetry: { getProperties() {
				return { wf_template_repo_session_id: useTemplatesStore().currentSessionId };
			} },
			setScrollPosition(pos) {
				this.scrollOffset = pos;
			},
			middleware: ["authenticated"]
		},
		beforeEnter: (_to, _from, next) => {
			const templatesStore = useTemplatesStore();
			if (!templatesStore.hasCustomTemplatesHost) window.location.href = templatesStore.websiteTemplateRepositoryURL;
			else next();
		}
	},
	{
		path: "/variables",
		name: VIEWS.VARIABLES,
		components: {
			default: VariablesView,
			sidebar: MainSidebar
		},
		meta: { middleware: ["authenticated"] }
	},
	{
		path: "/workflow/:name/debug/:executionId",
		name: VIEWS.EXECUTION_DEBUG,
		components: {
			default: NodeView,
			header: MainHeader,
			sidebar: MainSidebar,
			footer: LogsPanel
		},
		meta: {
			nodeView: true,
			keepWorkflowAlive: true,
			middleware: ["authenticated", "enterprise"],
			middlewareOptions: { enterprise: { feature: [EnterpriseEditionFeature.DebugInEditor] } }
		}
	},
	{
		path: "/workflow/:name/executions",
		name: VIEWS.WORKFLOW_EXECUTIONS,
		components: {
			default: WorkflowExecutionsView,
			header: MainHeader,
			sidebar: MainSidebar
		},
		meta: {
			keepWorkflowAlive: true,
			middleware: ["authenticated"]
		},
		children: [{
			path: "",
			name: VIEWS.EXECUTION_HOME,
			components: { executionPreview: WorkflowExecutionsLandingPage },
			meta: {
				keepWorkflowAlive: true,
				middleware: ["authenticated"]
			}
		}, {
			path: ":executionId/:nodeId?",
			name: VIEWS.EXECUTION_PREVIEW,
			components: { executionPreview: WorkflowExecutionsPreview },
			meta: {
				keepWorkflowAlive: true,
				middleware: ["authenticated"]
			}
		}]
	},
	{
		path: "/workflow/:name/evaluation",
		name: VIEWS.EVALUATION,
		components: {
			default: EvaluationRootView,
			header: MainHeader,
			sidebar: MainSidebar
		},
		props: { default: true },
		meta: {
			keepWorkflowAlive: true,
			middleware: ["authenticated"]
		},
		children: [{
			path: "",
			name: VIEWS.EVALUATION_EDIT,
			component: EvaluationsView,
			props: true
		}, {
			path: "test-runs/:runId",
			name: VIEWS.EVALUATION_RUNS_DETAIL,
			component: TestRunDetailView,
			props: true
		}]
	},
	{
		path: "/workflow/:workflowId/history/:versionId?",
		name: VIEWS.WORKFLOW_HISTORY,
		components: {
			default: WorkflowHistory,
			sidebar: MainSidebar
		},
		meta: {
			middleware: ["authenticated", "enterprise"],
			middlewareOptions: { enterprise: { feature: [EnterpriseEditionFeature.WorkflowHistory] } }
		}
	},
	{
		path: "/workflows/templates/:id",
		name: VIEWS.TEMPLATE_IMPORT,
		components: {
			default: NodeView,
			header: MainHeader,
			sidebar: MainSidebar
		},
		meta: {
			templatesEnabled: true,
			keepWorkflowAlive: true,
			getRedirect: getTemplatesRedirect,
			middleware: ["authenticated"]
		}
	},
	{
		path: "/workflows/onboarding/:id",
		name: VIEWS.WORKFLOW_ONBOARDING,
		components: {
			default: WorkflowOnboardingView,
			header: MainHeader,
			sidebar: MainSidebar
		},
		meta: {
			templatesEnabled: true,
			keepWorkflowAlive: true,
			getRedirect: () => getTemplatesRedirect(VIEWS.NEW_WORKFLOW),
			middleware: ["authenticated"]
		}
	},
	{
		path: "/workflow/new",
		name: VIEWS.NEW_WORKFLOW,
		components: {
			default: NodeView,
			header: MainHeader,
			sidebar: MainSidebar,
			footer: LogsPanel
		},
		meta: {
			nodeView: true,
			keepWorkflowAlive: true,
			middleware: ["authenticated"]
		}
	},
	{
		path: "/workflows/demo",
		name: VIEWS.DEMO,
		components: {
			default: NodeView,
			footer: DemoFooter
		},
		meta: {
			middleware: ["authenticated"],
			middlewareOptions: { authenticated: { bypass: () => {
				return useSettingsStore().isPreviewMode;
			} } }
		}
	},
	{
		path: "/workflow/:name/:nodeId?",
		name: VIEWS.WORKFLOW,
		components: {
			default: NodeView,
			header: MainHeader,
			sidebar: MainSidebar,
			footer: LogsPanel
		},
		meta: {
			nodeView: true,
			keepWorkflowAlive: true,
			middleware: ["authenticated"]
		}
	},
	{
		path: "/workflow",
		redirect: "/workflow/new"
	},
	{
		path: "/signin",
		name: VIEWS.SIGNIN,
		components: { default: SigninView },
		meta: {
			telemetry: { pageCategory: "auth" },
			middleware: ["guest"]
		}
	},
	{
		path: "/signup",
		name: VIEWS.SIGNUP,
		components: { default: SignupView },
		meta: {
			telemetry: { pageCategory: "auth" },
			middleware: ["guest"]
		}
	},
	{
		path: "/signout",
		name: VIEWS.SIGNOUT,
		components: { default: SignoutView },
		meta: {
			telemetry: { pageCategory: "auth" },
			middleware: ["authenticated"]
		}
	},
	{
		path: "/setup",
		name: VIEWS.SETUP,
		components: { default: SetupView },
		meta: {
			middleware: ["defaultUser"],
			telemetry: { pageCategory: "auth" }
		}
	},
	{
		path: "/forgot-password",
		name: VIEWS.FORGOT_PASSWORD,
		components: { default: ForgotMyPasswordView },
		meta: {
			middleware: ["guest"],
			telemetry: { pageCategory: "auth" }
		}
	},
	{
		path: "/change-password",
		name: VIEWS.CHANGE_PASSWORD,
		components: { default: ChangePasswordView },
		meta: {
			middleware: ["guest"],
			telemetry: { pageCategory: "auth" }
		}
	},
	{
		path: "/settings",
		name: VIEWS.SETTINGS,
		component: SettingsView,
		props: true,
		redirect: () => {
			if (useSettingsStore().settings.hideUsagePage) return { name: VIEWS.PERSONAL_SETTINGS };
			return { name: VIEWS.USAGE };
		},
		children: [
			{
				path: "usage",
				name: VIEWS.USAGE,
				components: { settingsView: SettingsUsageAndPlan },
				meta: {
					middleware: ["authenticated", "custom"],
					middlewareOptions: { custom: () => {
						return !useSettingsStore().settings.hideUsagePage;
					} },
					telemetry: {
						pageCategory: "settings",
						getProperties() {
							return { feature: "usage" };
						}
					}
				}
			},
			{
				path: "personal",
				name: VIEWS.PERSONAL_SETTINGS,
				components: { settingsView: SettingsPersonalView },
				meta: {
					middleware: ["authenticated"],
					telemetry: {
						pageCategory: "settings",
						getProperties() {
							return { feature: "personal" };
						}
					}
				}
			},
			{
				path: "users",
				name: VIEWS.USERS_SETTINGS,
				components: { settingsView: SettingsUsersView },
				meta: {
					middleware: ["authenticated", "rbac"],
					middlewareOptions: { rbac: { scope: ["user:create", "user:update"] } },
					telemetry: {
						pageCategory: "settings",
						getProperties() {
							return { feature: "users" };
						}
					}
				}
			},
			{
				path: "project-roles",
				components: { settingsView: RouterView },
				children: [
					{
						path: "",
						name: VIEWS.PROJECT_ROLES_SETTINGS,
						component: async () => await __vitePreload(() => import("./ProjectRolesView-DRcdZSoA.js"), __vite__mapDeps([289,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,36,24,20,37,85,26,30,22,290]))
					},
					{
						path: "new",
						name: VIEWS.PROJECT_NEW_ROLE,
						component: async () => await __vitePreload(() => import("./ProjectRoleView-C4_5qeMc.js"), __vite__mapDeps([291,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,36,24,20,37,85,292]))
					},
					{
						path: "edit/:roleSlug",
						name: VIEWS.PROJECT_ROLE_SETTINGS,
						component: async () => await __vitePreload(() => import("./ProjectRoleView-C4_5qeMc.js"), __vite__mapDeps([291,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,19,36,24,20,37,85,292]))
					}
				],
				meta: {
					middleware: [
						"authenticated",
						"rbac",
						"custom"
					],
					middlewareOptions: {
						rbac: { scope: ["role:manage"] },
						custom: () => {
							return useEnvFeatureFlag().check.value("CUSTOM_ROLES");
						}
					},
					telemetry: {
						pageCategory: "settings",
						getProperties() {
							return { feature: "project-roles" };
						}
					}
				}
			},
			{
				path: "api",
				name: VIEWS.API_SETTINGS,
				components: { settingsView: SettingsApiView },
				meta: {
					middleware: ["authenticated"],
					telemetry: {
						pageCategory: "settings",
						getProperties() {
							return { feature: "api" };
						}
					}
				}
			},
			{
				path: "environments",
				name: VIEWS.SOURCE_CONTROL,
				components: { settingsView: SettingsSourceControl },
				meta: {
					middleware: ["authenticated", "rbac"],
					middlewareOptions: { rbac: { scope: "sourceControl:manage" } },
					telemetry: {
						pageCategory: "settings",
						getProperties() {
							return { feature: "environments" };
						}
					}
				}
			},
			{
				path: "external-secrets",
				name: VIEWS.EXTERNAL_SECRETS_SETTINGS,
				components: { settingsView: SettingsExternalSecrets },
				meta: {
					middleware: ["authenticated", "rbac"],
					middlewareOptions: { rbac: { scope: ["externalSecretsProvider:list", "externalSecretsProvider:update"] } },
					telemetry: {
						pageCategory: "settings",
						getProperties() {
							return { feature: "external-secrets" };
						}
					}
				}
			},
			{
				path: "sso",
				name: VIEWS.SSO_SETTINGS,
				components: { settingsView: SettingsSso },
				meta: {
					middleware: ["authenticated", "rbac"],
					middlewareOptions: { rbac: { scope: "saml:manage" } },
					telemetry: {
						pageCategory: "settings",
						getProperties() {
							return { feature: "sso" };
						}
					}
				}
			},
			{
				path: "log-streaming",
				name: VIEWS.LOG_STREAMING_SETTINGS,
				components: { settingsView: SettingsLogStreamingView },
				meta: {
					middleware: ["authenticated", "rbac"],
					middlewareOptions: { rbac: { scope: "logStreaming:manage" } },
					telemetry: { pageCategory: "settings" }
				}
			},
			{
				path: "workers",
				name: VIEWS.WORKER_VIEW,
				components: { settingsView: WorkerView },
				meta: { middleware: ["authenticated"] }
			},
			{
				path: "community-nodes",
				name: VIEWS.COMMUNITY_NODES,
				components: { settingsView: SettingsCommunityNodesView },
				meta: {
					middleware: [
						"authenticated",
						"rbac",
						"custom"
					],
					middlewareOptions: {
						rbac: { scope: ["communityPackage:list", "communityPackage:update"] },
						custom: () => {
							return useSettingsStore().isCommunityNodesFeatureEnabled;
						}
					},
					telemetry: { pageCategory: "settings" }
				}
			},
			{
				path: "ldap",
				name: VIEWS.LDAP_SETTINGS,
				components: { settingsView: SettingsLdapView },
				meta: {
					middleware: ["authenticated", "rbac"],
					middlewareOptions: { rbac: { scope: "ldap:manage" } }
				}
			},
			{
				path: "provisioning",
				name: VIEWS.PROVISIONING_SETTINGS,
				components: { settingsView: SettingsProvisioningView },
				meta: {
					middleware: [
						"authenticated",
						"enterprise",
						"rbac"
					],
					middlewareOptions: {
						enterprise: { feature: "provisioning" },
						rbac: { scope: "provisioning:manage" }
					},
					telemetry: {
						pageCategory: "settings",
						getProperties() {
							return { feature: "provisioning" };
						}
					}
				}
			}
		]
	},
	{
		path: "/saml/onboarding",
		name: VIEWS.SAML_ONBOARDING,
		components: { default: SamlOnboarding },
		meta: {
			middleware: ["authenticated", "custom"],
			middlewareOptions: { custom: () => {
				const settingsStore = useSettingsStore();
				return useSSOStore().isEnterpriseSamlEnabled && !settingsStore.isCloudDeployment;
			} },
			telemetry: { pageCategory: "auth" }
		}
	},
	...projectsRoutes,
	{
		path: "/entity-not-found/:entityType(credential|workflow)",
		props: true,
		name: VIEWS.ENTITY_NOT_FOUND,
		components: {
			default: EntityNotFound,
			sidebar: MainSidebar
		}
	},
	{
		path: "/entity-not-authorized/:entityType(credential|workflow)",
		props: true,
		name: VIEWS.ENTITY_UNAUTHORIZED,
		components: {
			default: EntityUnAuthorised,
			sidebar: MainSidebar
		}
	},
	{
		path: "/:pathMatch(.*)*",
		name: VIEWS.NOT_FOUND,
		component: ErrorView,
		props: {
			messageKey: "error.pageNotFound",
			errorCode: 404,
			redirectTextKey: "error.goBack",
			redirectPage: VIEWS.HOMEPAGE
		},
		meta: {
			nodeView: true,
			telemetry: { disabled: true }
		}
	}
];
function withCanvasReadOnlyMeta(route) {
	if (!route.meta) route.meta = {};
	route.meta.readOnlyCanvas = !EDITABLE_CANVAS_VIEWS.includes(route?.name ?? "");
	if (route.children) route.children = route.children.map(withCanvasReadOnlyMeta);
	return route;
}
var router = createRouter({
	history: createWebHistory(window.BASE_PATH ?? "/"),
	scrollBehavior(to, _, savedPosition) {
		if (savedPosition === null && to.name === VIEWS.TEMPLATES && to.meta?.setScrollPosition) to.meta.setScrollPosition(0);
	},
	routes: routes.map(withCanvasReadOnlyMeta)
});
router.beforeEach(async (to, from, next) => {
	try {
		await initializeCore();
		await initializeAuthenticatedFeatures(void 0, to.name);
		if (useSettingsStore().showSetupPage) {
			if (to.name === VIEWS.SETUP) return next();
			return next({ name: VIEWS.SETUP });
		}
		const routeMiddleware = to.meta?.middleware ?? [];
		const routeMiddlewareOptions = to.meta?.middlewareOptions ?? {};
		for (const middlewareName of routeMiddleware) {
			let nextCalled = false;
			const middlewareNext = ((location) => {
				next(location);
				nextCalled = true;
			});
			const middlewareOptions = routeMiddlewareOptions[middlewareName];
			const middlewareFn = middleware[middlewareName];
			await middlewareFn(to, from, middlewareNext, middlewareOptions);
			if (nextCalled) return;
		}
		return next();
	} catch (failure) {
		const settingsStore = useSettingsStore();
		if (failure instanceof MfaRequiredError && settingsStore.isMFAEnforced) if (to.name !== VIEWS.PERSONAL_SETTINGS) return next({ name: VIEWS.PERSONAL_SETTINGS });
		else return next();
		if (isNavigationFailure(failure)) console.log(failure);
		else console.error(failure);
	}
});
router.afterEach((to, from) => {
	try {
		const telemetry = useTelemetry();
		const uiStore = useUIStore();
		const templatesStore = useTemplatesStore();
		useExternalHooks().run("main.routeChange", {
			from,
			to
		});
		uiStore.currentView = to.name ?? "";
		if (to.meta?.templatesEnabled) templatesStore.setSessionId();
		else templatesStore.resetSessionId();
		telemetry.page(to);
		const { trackResourceOpened } = useRecentResources();
		trackResourceOpened(to);
	} catch (failure) {
		if (isNavigationFailure(failure)) console.log(failure);
		else console.error(failure);
	}
});
var router_default = router;
export { registerModuleRoutes as n, router_default as t };
